<?php
$data = file_get_contents('https://sportsonline.gl/prog.txt');
$lines = explode("\n", $data);
$output = [];
$day = '';
$italianChannels = [];

foreach ($lines as $line) {
  $line = trim($line);

  // Controlla se la riga è un giorno della settimana
  if (preg_match('/^(MONDAY|TUESDAY|WEDNESDAY|THURSDAY|FRIDAY|SATURDAY|SUNDAY)$/', $line)) {
    $day = $line;
    $italianChannels = []; // Resetta i canali italiani per il nuovo giorno
  }

  // Controlla se la riga è un canale italiano
  if (preg_match('/^HD\d+ ITALIAN$/', $line)) {
    $channelNumber = preg_replace('/\D/', '', $line); // Estrae il numero del canale
    array_push($italianChannels, 'hd' + $channelNumber);
  }

  // Controlla se la riga contiene un link a una partita di calcio italiana
  foreach ($italianChannels as $channel) {
    if (strpos($line, $channel) !== false) {
      array_push($output, $day);
      array_push($output, $line);
      array_push($output, '');
      break;
    }
  }
}

echo implode("\n", $output);
?>
